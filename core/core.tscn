[gd_scene load_steps=2 format=2]

[ext_resource path="res://core/core.gd" type="Script" id=1]

[node name="core" type="Node2D"]
script = ExtResource( 1 )

[node name="timer_beat" type="Timer" parent="."]

[node name="bg" type="ColorRect" parent="."]
margin_right = 1920.0
margin_bottom = 1079.0
color = Color( 0.109804, 0.0509804, 0.152941, 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="interface" type="Control" parent="."]
margin_top = -1.41422
margin_right = 1920.0
margin_bottom = 1078.59
__meta__ = {
"_edit_use_anchors_": false
}

[node name="title" type="Label" parent="interface"]
margin_left = 40.0
margin_top = 43.0
margin_right = 190.0
margin_bottom = 67.0
rect_scale = Vector2( 4, 4 )
text = "merlang by ainlid, 2021"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="load_button" type="Button" parent="interface"]
margin_left = 67.0
margin_top = 225.042
margin_right = 561.0
margin_bottom = 281.042
text = "Load audio"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="file_dialog" type="FileDialog" parent="interface"]
visible = true
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -893.0
margin_top = -187.0
margin_right = -399.0
margin_bottom = 289.0
window_title = "Open File(s)"
dialog_text = "Select a .wav audio file"
mode = 1
access = 2
filters = PoolStringArray( "*.wav" )
current_dir = "/Daniil/art/merlang"
current_path = "/Daniil/art/merlang/"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="play_button" type="Button" parent="interface"]
margin_left = 67.0
margin_top = 878.029
margin_right = 561.0
margin_bottom = 934.029
text = "Play"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="label_params" type="Label" parent="interface"]
margin_left = 621.0
margin_top = 225.0
margin_right = 1576.0
margin_bottom = 281.0
text = "Parameters:"
align = 1
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="tempo_slider" type="HSlider" parent="interface"]
margin_left = 791.0
margin_top = 335.0
margin_right = 1087.0
margin_bottom = 391.0
min_value = 50.0
max_value = 200.0
value = 120.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="tempo_label" type="Label" parent="interface"]
margin_left = 621.0
margin_top = 335.0
margin_right = 746.0
margin_bottom = 391.0
text = "Tempo: "
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="density_slider" type="HSlider" parent="interface"]
margin_left = 791.0
margin_top = 391.042
margin_right = 1087.0
margin_bottom = 447.042
value = 50.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="density_label" type="Label" parent="interface"]
margin_left = 621.0
margin_top = 391.042
margin_right = 746.0
margin_bottom = 447.042
text = "Density: "
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="pitch_slider" type="HSlider" parent="interface"]
margin_left = 791.0
margin_top = 449.042
margin_right = 1087.0
margin_bottom = 505.042
min_value = -6.0
max_value = 6.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="pitch_label" type="Label" parent="interface"]
margin_left = 621.0
margin_top = 447.042
margin_right = 746.0
margin_bottom = 503.042
text = "Pitch: "
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="tempo_random_slider" type="HSlider" parent="interface"]
margin_left = 1280.0
margin_top = 337.0
margin_right = 1576.0
margin_bottom = 393.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="tempo_random_label" type="Label" parent="interface"]
margin_left = 1110.0
margin_top = 335.0
margin_right = 1235.0
margin_bottom = 391.0
text = "Randomization: "
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="density_random_slider" type="HSlider" parent="interface"]
margin_left = 1280.0
margin_top = 395.0
margin_right = 1576.0
margin_bottom = 451.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="density_random_label" type="Label" parent="interface"]
margin_left = 1110.0
margin_top = 393.0
margin_right = 1235.0
margin_bottom = 449.0
text = "Randomization: "
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="pitch_random_slider" type="HSlider" parent="interface"]
margin_left = 1280.0
margin_top = 453.0
margin_right = 1576.0
margin_bottom = 509.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="pitch_random_label" type="Label" parent="interface"]
margin_left = 1110.0
margin_top = 451.0
margin_right = 1235.0
margin_bottom = 507.0
text = "Randomization: "
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="rounding_toggle" type="CheckBox" parent="interface"]
margin_left = 791.0
margin_top = 509.0
margin_right = 828.0
margin_bottom = 565.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="rounding_toggle_label" type="Label" parent="interface"]
margin_left = 621.0
margin_top = 509.0
margin_right = 746.0
margin_bottom = 565.0
text = "Use rounding: "
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="rounding_slider" type="HSlider" parent="interface"]
margin_left = 791.0
margin_top = 567.0
margin_right = 1087.0
margin_bottom = 623.0
min_value = 2.0
max_value = 16.0
value = 16.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="rounding_label" type="Label" parent="interface"]
margin_left = 621.0
margin_top = 565.0
margin_right = 746.0
margin_bottom = 621.0
text = "Rounding factor: "
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="seed_box" type="SpinBox" parent="interface"]
margin_left = 791.0
margin_top = 623.0
margin_right = 1087.0
margin_bottom = 677.0
max_value = 1e+10

[node name="seed_label" type="Label" parent="interface"]
margin_left = 621.0
margin_top = 623.0
margin_right = 746.0
margin_bottom = 679.0
text = "RNG seed: "
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="seed_random_button" type="Button" parent="interface"]
margin_left = 1087.0
margin_top = 623.0
margin_right = 1280.0
margin_bottom = 679.0
text = "Random seed"

[node name="info" type="Label" parent="interface"]
margin_left = 621.0
margin_top = 765.0
margin_right = 1817.0
margin_bottom = 840.0
text = "I couldn't find a tool to create sound collages the way I want so I tried to make one. it loads one or multiple samples and plays random parts. Use 44100 Hz samples for proper playback.
You can control the speed and probability of those grains spawning. The randomization sliders determine the chance of random changes to tempo, density or pitch.
You can use rounding to increase the repetition by rounding the beginning points of the samples.
Every random event happening to the audio is tied to a single RNG. You can safely replicate the results by reusing the seed. Have fun!"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="audio" type="AudioStreamPlayer" parent="."]

[connection signal="timeout" from="timer_beat" to="." method="_tick"]
[connection signal="pressed" from="interface/load_button" to="." method="_load_pressed"]
[connection signal="files_selected" from="interface/file_dialog" to="." method="_files_selected"]
[connection signal="pressed" from="interface/play_button" to="." method="_play_pressed"]
[connection signal="value_changed" from="interface/tempo_slider" to="." method="_set_tempo"]
[connection signal="value_changed" from="interface/density_slider" to="." method="_set_density"]
[connection signal="value_changed" from="interface/pitch_slider" to="." method="_set_pitch"]
[connection signal="value_changed" from="interface/tempo_random_slider" to="." method="_set_tempo_random"]
[connection signal="value_changed" from="interface/density_random_slider" to="." method="_set_density_random"]
[connection signal="value_changed" from="interface/pitch_random_slider" to="." method="_set_pitch_random"]
[connection signal="toggled" from="interface/rounding_toggle" to="." method="_toggle_rounding"]
[connection signal="value_changed" from="interface/rounding_slider" to="." method="_set_rounding"]
[connection signal="value_changed" from="interface/seed_box" to="." method="_set_seed"]
[connection signal="pressed" from="interface/seed_random_button" to="." method="_randomize_seed"]
